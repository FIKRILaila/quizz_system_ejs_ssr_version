/*!
 * Start Bootstrap - SB Admin 2 v4.1.3 (https://startbootstrap.com/theme/sb-admin-2)
 * Copyright 2013-2021 Start Bootstrap
 * Licensed under MIT (https://github.com/StartBootstrap/startbootstrap-sb-admin-2/blob/master/LICENSE)
 */

const http=require("http"),fs=require("fs"),mysql=require("mysql"),ejs=require("ejs"),viewPath="views/",connection=mysql.createConnection({host:"localhost",user:"root",password:"123456",database:"test"}),views={home:"index.ejs",about:"home.ejs",notFound:"404.ejs"};function display(e){return e?void 0!==views[e]?viewPath+views[e]:viewPath+views.notFound:viewPath+views.home}const routes={"/":(e,n)=>{const s=display("home");connection.connect(),connection.query("SELECT * FROM users",function(e,o,t){if(e)throw e;console.log("The solution is: ",o),ejs.renderFile(s,{results:o},(e,o)=>e?(console.log(e),void n.end()):void n.end(o))}),connection.end()},about:(e,o)=>{console.log("about"),o.end()},notFound:(e,o)=>{o.end()}};function load(e){return e?void 0!==routes[e]?routes[e]:routes.notFound:routes["/"]}http.createServer((e,t)=>{const o=load(e.url.replace(/^\/+|\/+$/g,""));o?o(e,t):fs.readFile(e.url,(e,o)=>{e||t.end(o.toString())})}).listen(7e3,()=>console.log("Server Started"));